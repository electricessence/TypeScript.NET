/*!
 * @author electricessence / https://github.com/electricessence/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports","../Observable/ObservableBase","../../extends"],e)}(function(e,t){"use strict";var n=e("../Observable/ObservableBase"),o=e("../../extends"),i=o["default"],r=function(e){function t(t,n,o){if(void 0===n&&(n=1/0),void 0===o&&(o=t),e.call(this),this._interval=t,this._maxCount=n,this._initialDelay=o,this._count=0,null===t||void 0===t)throw"'interval' must be a valid number.";if(0>t)throw"'interval' cannot be negative."}return i(t,e),t.startNew=function(e,n,o){void 0===n&&(n=1/0),void 0===o&&(o=e);var i=new t(e,n,e);return i.start(),i},Object.defineProperty(t.prototype,"isRunning",{get:function(){return!!this._cancel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.start=function(){var e=this;if(!e._cancel&&e._count<e._maxCount)if(e._count||e._initialDelay==e._interval){var n=setInterval(t._onTick,e._interval,e);e._cancel=function(){clearInterval(n)}}else{var o=setTimeout(t._onTick,e._initialDelay,e,!0);e._cancel=function(){clearTimeout(o)}}},t.prototype.stop=function(){this.cancel()},t.prototype.reset=function(){this.stop(),this._count=0},t.prototype.cancel=function(){return this._cancel?(this._cancel(),this._cancel=null,!0):!1},t.prototype.dispose=function(){this.cancel(),e.prototype.dispose.call(this)},t._onTick=function(e,t){var n=e._count++,o=e._maxCount,i=e._count>=o;t&&(e.cancel(),e.start()),i&&e.stop(),o>n&&e._onNext(n),i&&e._onCompleted()},t}(n.ObservableBase);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r});
//# sourceMappingURL=Timer.js.map
