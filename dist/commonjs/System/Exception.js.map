{"version":3,"sources":["System/Exception.js","System/Exception.ts"],"names":[],"mappings":";;;;;AAKA;;;;;;ACGA,IAAM,OAAc,WAAd;;IAKN;AAcC,yBAG8B;YAFtB,gEAAiB,oBAEK;YAD7B,uEAAuB,oBACM;YAA7B,6BAA6B;;;;AAFtB,aAAA,OAAA,GAAA,OAAA,CAEsB;AAE7B,YAAI,IAAI,IAAJ,CAFyB;AAI7B,UAAE,IAAF,GAAS,EAAE,OAAF,EAAT,CAJ6B;AAK7B,UAAE,IAAF,GAAS,EAAT,CAL6B;AAM7B,YAAG,cAAH,EACC,EAAE,IAAF,CAAO,gBAAP,IAA2B,cAA3B,CADD;AAQA,YAAG,aAAH,EAAkB,cAAc,CAAd,EAAlB;AAGA,YAAI;AACH,gBAAI,QAAe,IAAU,KAAJ,EAAN,CAAmB,KAAnB,CADhB;AAEH,oBAAQ,SAAS,MAAM,OAAN,CAAc,UAAd,EAAyB,EAAzB,EAA6B,OAA7B,CAAqC,oBAArC,EAA0D,EAA1D,CAAT,IAA0E,EAA1E,CAFL;AAGH,iBAAK,KAAL,GAAa,EAAE,uBAAF,KAA8B,KAA9B,CAHV;SAAJ,CAIE,OAAM,EAAN,EAAU,EAAV;AAEF,eAAO,MAAP,CAAc,CAAd,EAvB6B;KAH9B;;;;kCAqCiB;AACf,mBAAO,IAAP,CADe;;;;mCAMT;AAEP,yBAAW,KAAK,uBAAL,QAAX,CAFO;;;;kDAKyB;AAChC,gBAAI,IAAI,IAAJ;gBAAU,IAAI,EAAE,OAAF,CADc;AAEhC,mBAAO,EAAE,IAAF,IAAU,IAAK,OAAO,CAAP,GAAY,EAAjB,CAAV,CAFyB;;;;kCAQ1B;AAEN,gBAAI,OAAO,KAAK,IAAL,CAFL;AAGN,iBAAI,IAAI,CAAJ,IAAS,IAAb,EACA;AACC,oBAAG,KAAK,cAAL,CAAoB,CAApB,CAAH,EACC,OAAO,KAAK,CAAL,CAAP,CADD;aAFD;;;;;;;AAzEW,QAAA,SAAA,GAAS,SAAT;AAiFb,OAAA,cAAA,CAAA,OAAA,EAAA,YAAA,EAAA,EAAA,OAAA,IAAA,EAAA;ADnDA,QAAQ,OAAR,GCmDe,SDnDf","file":"System/Exception.js","sourcesContent":["/*!\n * @author electricessence / https://github.com/electricessence/\n * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md\n * Based upon: https://msdn.microsoft.com/en-us/library/System.Exception%28v=vs.110%29.aspx\n */\n\"use strict\";\nconst NAME = 'Exception';\nclass Exception {\n    constructor(message = null, innerException = null, beforeSealing) {\n        this.message = message;\n        var _ = this;\n        _.name = _.getName();\n        _.data = {};\n        if (innerException)\n            _.data['innerException'] = innerException;\n        if (beforeSealing)\n            beforeSealing(_);\n        try {\n            var stack = (new Error()).stack;\n            stack = stack && stack.replace(/^Error\\n/, '').replace(/(.|\\n)+\\s+at new.+/, '') || '';\n            this.stack = _.toStringWithoutBrackets() + stack;\n        }\n        catch (ex) { }\n        Object.freeze(_);\n    }\n    getName() { return NAME; }\n    toString() {\n        return `[${this.toStringWithoutBrackets()}]`;\n    }\n    toStringWithoutBrackets() {\n        var _ = this, m = _.message;\n        return _.name + (m ? (': ' + m) : '');\n    }\n    dispose() {\n        var data = this.data;\n        for (let k in data) {\n            if (data.hasOwnProperty(k))\n                delete data[k];\n        }\n    }\n}\nexports.Exception = Exception;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Exception;\n","/*!\r\n * @author electricessence / https://github.com/electricessence/\r\n * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md\r\n * Based upon: https://msdn.microsoft.com/en-us/library/System.Exception%28v=vs.110%29.aspx\r\n */\r\n\r\nimport {IDisposable} from \"./Disposable/IDisposable\";\r\nimport {IMap} from \"./Collections/Dictionaries/IDictionary\";\r\nconst NAME:string = 'Exception';\r\n\r\n/**\r\n * Represents errors that occur during application execution.\r\n */\r\nexport class Exception implements Error, IDisposable\r\n{\r\n\t/**\r\n\t * A string representation of the error type.\r\n\t * The default is 'Error'.\r\n\t */\r\n\tname:string;\r\n\r\n\t/**\r\n\t * Initializes a new instance of the Exception class with a specified error message and optionally a reference to the inner exception that is the cause of this exception.\r\n\t * @param message\r\n\t * @param innerException\r\n\t * @param beforeSealing This delegate is used to allow actions to occur just before this constructor finishes.  Since some compilers do not allow the use of 'this' before super.\r\n\t */\r\n\tconstructor(\r\n\t\tpublic message:string = null,\r\n\t\tinnerException:Error = null,\r\n\t\tbeforeSealing?:(ex:any)=>void)\r\n\t{\r\n\t\tvar _ = this;\r\n\r\n\t\t_.name = _.getName();\r\n\t\t_.data = {};\r\n\t\tif(innerException)\r\n\t\t\t_.data['innerException'] = innerException;\r\n\r\n\t\t/* Originally intended to use 'get' accessors for properties,\r\n\t\t * But debuggers don't display these readily yet.\r\n\t\t * Object.freeze has to be used carefully, but will prevent overriding values.\r\n\t\t */\r\n\r\n\t\tif(beforeSealing) beforeSealing(_);\r\n\r\n\t\t// Node has a .stack, let's use it...\r\n\t\ttry {\r\n\t\t\tvar stack:string = (<any>new Error()).stack;\r\n\t\t\tstack = stack && stack.replace(/^Error\\n/,'').replace(/(.|\\n)+\\s+at new.+/,'') || '';\r\n\t\t\tthis.stack = _.toStringWithoutBrackets() + stack;\r\n\t\t} catch(ex) {}\r\n\r\n\t\tObject.freeze(_);\r\n\t}\r\n\r\n\tstack:string;\r\n\r\n\tdata:IMap<any>;\r\n\r\n\t/**\r\n\t * A string representation of the error type.\r\n\t * The default is 'Error'.\r\n\t */\r\n\tprotected getName():string\r\n\t{ return NAME; }\r\n\r\n\t/**\r\n\t * The string representation of the Exception instance.\r\n\t */\r\n\ttoString():string\r\n\t{\r\n\t\treturn `[${this.toStringWithoutBrackets()}]`;\r\n\t}\r\n\r\n\tprotected toStringWithoutBrackets():string {\r\n\t\tvar _ = this, m = _.message;\r\n\t\treturn _.name + (m ? (': ' + m) : '');\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the data object.\r\n\t */\r\n\tdispose():void\r\n\t{\r\n\t\tvar data = this.data;\r\n\t\tfor(let k in data)\r\n\t\t{\r\n\t\t\tif(data.hasOwnProperty(k))\r\n\t\t\t\tdelete data[k];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Exception;\r\n"]}