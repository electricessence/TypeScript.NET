{"version":3,"sources":["System/Collections/Array/Sort.ts"],"names":["ensureArray","createComparer"],"mappings":";;;;;;;;;;;;;qBAQiB,aAAa;;;;uBACM,eAAe;;AAEnD,SAAA,WAAA,CAAwB,KAAW,EAAA;AAElCA,WAAOA,KAAKA,CAACA,OAAOA,CAACA,KAAKA,CAACA,GACnBA,KAAKA,GACVA,CAAIA,KAAKA,CAACA,CAACA;CACdA;;AAyBD,SAAA,cAAA,CACC,QAA4C,EAEnB;QADzB,KAAK,yDAAmB,CAAe;QACvC,eAAe,yDAAO,GAAG;;AAEzBC,QAAIA,gBAAgBA,GAAGA,CAACA,mBAAKA,SAASA,CAACA,eAAeA,CAACA,CAACA;AAExDA,WAAOA,UAACA,CAAmBA,EAAEA,CAAmBA,EAAAA;AAG/CA,YAAIA,MAAMA,GAAGA,WAAWA,CAACA,QAAQA,CAACA,CAACA,CAACA,CAACA,CAACA;AACtCA,YAAIA,MAAMA,GAAGA,WAAWA,CAACA,QAAQA,CAACA,CAACA,CAACA,CAACA,CAACA;AACtCA,YAAIA,GAAGA,GAAGA,IAAIA,CAACA,GAAGA,CAACA,MAAMA,CAACA,MAAMA,EAAEA,MAAMA,CAACA,MAAMA,CAACA,CAACA;AAEjDA,YAAIA,MAAMA,GAAWA,KAAKA,CAACA,OAAOA,CAACA,KAAKA,CAACA,GAAGA,KAAKA,GAAGA,IAAIA,CAACA;AACzDA,aAAIA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAACA,GAAGA,EAAEA,CAACA,EAAEA,EACzBA;AACCA,gBAAIA,EAAEA,GAAGA,MAAMA,CAACA,CAACA,CAACA;gBAAEA,EAAEA,GAAGA,MAAMA,CAACA,CAACA,CAACA;gBAC9BA,CAACA,GAAIA,MAAMA,GACPA,CAACA,GAACA,MAAMA,CAACA,MAAMA,GAAGA,MAAMA,CAACA,CAACA,CAACA,GAAGA,CAAeA,GACvCA,KAAKA,CAACA;AAEpBA,gBAAGA,gBAAgBA,EACnBA;AACCA,oBAAGA,mBAAKA,SAASA,CAACA,EAAEA,CAACA,EACpBA,EAAEA,GAAGA,eAAeA,CAACA;AACtBA,oBAAGA,mBAAKA,SAASA,CAACA,EAAEA,CAACA,EACpBA,EAAEA,GAAGA,eAAeA,CAACA;aAEtBA;AAEDA,gBAAIA,CAACA,GAAGA,sBAAQA,EAAEA,EAAEA,EAAEA,CAACA,CAACA;AACxBA,gBAAGA,CAACA,KAAGA,CAAmBA,EACzBA,OAAOA,CAACA,GAACA,CAACA,CAACA;SAEZA;AAEDA,eAAOA,CAACA,CAACA;KACTA,CAACA;CACFA;;qBAGA,cAAc;QACI,EAAE,GAApB,cAAc","file":"System/Collections/Array/Sort.js","sourcesContent":["/*\r\n * @author electricessence / https://github.com/electricessence/\r\n * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md\r\n */\r\n\r\n///<reference path=\"../../FunctionTypes.d.ts\"/>\r\n///<reference path=\"../Sorting/Order.d.ts\"/>\r\n\r\nimport Type from '../../Types';\r\nimport {compare,CompareResult} from '../../Compare';\r\n\r\nfunction ensureArray<T>(value:T|T[]):T[]\r\n{\r\n\treturn Array.isArray(value)\r\n\t\t? <T[]>value\r\n\t\t: [<T>value];\r\n}\r\n\r\n/**\r\n * A factory function that creates a comparer to be used in multi-dimensional sorting.\r\n *\r\n * <h4>Example</h4>\r\n * ```typescript\r\n * var myArray = [{a:1:b:2},{a:3,b:4},{a:1,b:3}];\r\n *\r\n * // First sort by a, then by b.\r\n * myArray.sort(\r\n *   createComparer(\r\n *     (e)=> [e.a, e.b],\r\n *     [Order.Ascending, Order.Descending]\r\n *   )\r\n * );\r\n *\r\n * // result: [{a:1,b:3},{a:1:b:2},{a:3,b:4}]\r\n * ```\r\n *\r\n * @param selector\r\n * @param order\r\n * @param equivalentToNaN\r\n * @returns {function((TSource|TSource[]), (TSource|TSource[])): CompareResult}\r\n */\r\nexport function createComparer<TSource,TSelect extends Primitive>(\r\n\tselector:Selector<TSource|TSource[],TSelect>,\r\n\torder:Order | Order[] = Order.Ascending,\r\n\tequivalentToNaN:any = NaN):Comparison<TSource|TSource[]>\r\n{\r\n\tvar nanHasEquivalent = !Type.isTrueNaN(equivalentToNaN);\r\n\r\n\treturn (a:TSource|TSource[], b:TSource|TSource[]):CompareResult=>\r\n\t{\r\n\t\t// Use an array always to ensure a single code path.\r\n\t\tvar aValue = ensureArray(selector(a));\r\n\t\tvar bValue = ensureArray(selector(b));\r\n\t\tvar len = Math.min(aValue.length, bValue.length);\r\n\r\n\t\tvar oArray:Order[] = Array.isArray(order) ? order : null;\r\n\t\tfor(let i = 0; i<len; i++)\r\n\t\t{\r\n\t\t\tvar vA = aValue[i], vB = bValue[i],\r\n\t\t\t    o  = oArray\r\n\t\t\t\t    ? (i<oArray.length ? oArray[i] : Order.Ascending)\r\n\t\t\t\t    : <Order>order;\r\n\r\n\t\t\tif(nanHasEquivalent)\r\n\t\t\t{\r\n\t\t\t\tif(Type.isTrueNaN(vA))\r\n\t\t\t\t\tvA = equivalentToNaN;\r\n\t\t\t\tif(Type.isTrueNaN(vB))\r\n\t\t\t\t\tvB = equivalentToNaN;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar r = compare(vA, vB);\r\n\t\t\tif(r!==CompareResult.Equal)\r\n\t\t\t\treturn o*r;\r\n\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t};\r\n}\r\n\r\nexport {\r\n\tcreateComparer as default, // Allow for default import.\r\n\tcreateComparer as by // Alias for Sort.by(...) instead of Sort.createComparer\r\n}\r\n"]}