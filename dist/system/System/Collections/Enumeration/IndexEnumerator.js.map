{"version":3,"sources":["System/Collections/Enumeration/IndexEnumerator.ts"],"names":[],"mappings":"AAAA;;;GAGG;;;;;;;;;;;;;;8BAHH;;;eAGG;YAIH,oCAAoC;YAC9B,SAAS,GAAG,iBAAe,CAAC;YAUlC;gBAAwC,mCAAiB;gBAGxD,yBACC,aAA4C;oBAD7C,iBA2DC;oBAvDA,IAAI,MAA+B,CAAC;oBACpC,QAAA,kBACC;wBAEC,MAAM,GAAG,aAAa,EAAE,CAAC;wBACzB,IAAG,MAAM,IAAI,MAAM,CAAC,MAAM,EAC1B;4BACC,IAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;4BAC1B,IAAG,GAAG,GAAC,CAAC,EAAE,6CAA6C;gCACtD,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;4BAEnD,IAAG,CAAC,QAAQ,CAAC,GAAG,CAAC;gCAChB,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;4BAE9C,IAAG,GAAG,IAAI,MAAM,CAAC,IAAI,KAAG,CAAC;gCACxB,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;4BAC5D,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC;4BAC7B,IAAG,CAAC,OAAO;gCACV,OAAO,GAAG,CAAC,CAAC;iCACR,IAAG,OAAO,IAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;gCACnC,MAAM,IAAI,KAAK,CAAC,yCAAyC,GAAG,OAAO,GAAG,gBAAgB,CAAC,CAAC;4BACzF,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC;4BAEzB,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;4BACvB,IAAG,CAAC,IAAI;gCACP,IAAI,GAAG,CAAC,CAAC;iCACL,IAAG,IAAI,IAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;gCAC7B,MAAM,IAAI,KAAK,CAAC,sCAAsC,GAAG,IAAI,GAAG,gBAAgB,CAAC,CAAC;4BACnF,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;yBACnB;oBACF,CAAC,EAED,UAAC,OAAO;wBAEP,IAAI,GAAG,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxD,IAAG,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC;4BACpB,OAAO,OAAO,CAAC,UAAU,EAAE,CAAC;wBAC7B,IAAM,OAAO,GAAW,MAAM,CAAC,OAAO,CAAC;wBACvC,IAAG,MAAM,CAAC,OAAO,IAAE,IAAI;4BAAE,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,mEAAmE;wBAChH,IAAG,CAAC,MAAM,CAAC,IAAI;4BAAE,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,mEAAmE;wBACrG,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC;wBAC9C,OAAO,CAAC,OAAO,GAAC,GAAG,IAAI,OAAO,IAAE,CAAC,CAAC;4BACjC,CAAC,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;4BAC7C,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;oBACzB,CAAC,EAED;wBAEC,IAAG,MAAM,EACT;4BACC,MAAM,CAAC,MAAM,GAAQ,IAAI,CAAC;yBAC1B;oBACF,CAAC,CACD,SAAC;oBACF,KAAI,CAAC,UAAU,GAAG,KAAK,CAAC;;gBACzB,CAAC;gBACF,sBAAC;YAAD,CA/DA,AA+DC,CA/DuC,+BAAc,GA+DrD;;iCAEc,eAAe;QAAC,CAAC","file":"IndexEnumerator.js","sourcesContent":["/*!\r\n * @author electricessence / https://github.com/electricessence/\r\n * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md\r\n */\r\n\r\nimport {EnumeratorBase} from \"./EnumeratorBase\";\r\nimport __extendsImport from \"../../../extends\";\r\n// noinspection JSUnusedLocalSymbols\r\nconst __extends = __extendsImport;\r\n\r\nexport interface IndexEnumeratorSource<T> {\r\n\tsource:{ [index:number]:T };\r\n\tlength:number;\r\n\tstep?:number\r\n\r\n\tpointer?:number;\r\n}\r\n\r\nexport class IndexEnumerator<T> extends EnumeratorBase<T>\r\n{\r\n\r\n\tconstructor(\r\n\t\tsourceFactory:() => IndexEnumeratorSource<T>)\r\n\t{\r\n\r\n\t\tlet source:IndexEnumeratorSource<T>;\r\n\t\tsuper(\r\n\t\t\t() =>\r\n\t\t\t{\r\n\t\t\t\tsource = sourceFactory();\r\n\t\t\t\tif(source && source.source)\r\n\t\t\t\t{\r\n\t\t\t\t\tconst len = source.length;\r\n\t\t\t\t\tif(len<0) // Null is allowed but will exit immediately.\r\n\t\t\t\t\t\tthrow new Error(\"length must be zero or greater\");\r\n\r\n\t\t\t\t\tif(!isFinite(len))\r\n\t\t\t\t\t\tthrow new Error(\"length must finite number\");\r\n\r\n\t\t\t\t\tif(len && source.step===0)\r\n\t\t\t\t\t\tthrow new Error(\"Invalid IndexEnumerator step value (0).\");\r\n\t\t\t\t\tlet pointer = source.pointer;\r\n\t\t\t\t\tif(!pointer)\r\n\t\t\t\t\t\tpointer = 0;\r\n\t\t\t\t\telse if(pointer!=Math.floor(pointer))\r\n\t\t\t\t\t\tthrow new Error(\"Invalid IndexEnumerator pointer value (\" + pointer + \") has decimal.\");\r\n\t\t\t\t\tsource.pointer = pointer;\r\n\r\n\t\t\t\t\tlet step = source.step;\r\n\t\t\t\t\tif(!step)\r\n\t\t\t\t\t\tstep = 1;\r\n\t\t\t\t\telse if(step!=Math.floor(step))\r\n\t\t\t\t\t\tthrow new Error(\"Invalid IndexEnumerator step value (\" + step + \") has decimal.\");\r\n\t\t\t\t\tsource.step = step;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t(yielder)=>\r\n\t\t\t{\r\n\t\t\t\tlet len = (source && source.source) ? source.length : 0;\r\n\t\t\t\tif(!len || isNaN(len))\r\n\t\t\t\t\treturn yielder.yieldBreak();\r\n\t\t\t\tconst current = <number>source.pointer;\r\n\t\t\t\tif(source.pointer==null) source.pointer = 0; // should never happen but is in place to negate compiler warnings.\r\n\t\t\t\tif(!source.step) source.step = 1; // should never happen but is in place to negate compiler warnings.\r\n\t\t\t\tsource.pointer = source.pointer + source.step;\r\n\t\t\t\treturn (current<len && current>=0)\r\n\t\t\t\t\t? yielder.yieldReturn(source.source[current])\r\n\t\t\t\t\t: yielder.yieldBreak();\r\n\t\t\t},\r\n\r\n\t\t\t() =>\r\n\t\t\t{\r\n\t\t\t\tif(source)\r\n\t\t\t\t{\r\n\t\t\t\t\tsource.source = <any>null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t\tthis._isEndless = false;\r\n\t}\r\n}\r\n\r\nexport default IndexEnumerator;"]}