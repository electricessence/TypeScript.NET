{"version":3,"sources":["System/Collections/LinkedNodeList.ts"],"names":[],"mappings":"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","file":"LinkedNodeList.js","sourcesContent":["/*!\r\n * @author electricessence / https://github.com/electricessence/\r\n * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md\r\n */\r\n\r\nimport {format} from \"../Text/Utility\";\r\nimport {InvalidOperationException} from \"../Exceptions/InvalidOperationException\";\r\nimport {ArgumentException} from \"../Exceptions/ArgumentException\";\r\nimport {ArgumentNullException} from \"../Exceptions/ArgumentNullException\";\r\nimport {EnumeratorBase} from \"./Enumeration/EnumeratorBase\";\r\nimport {ILinkedNode, ILinkedNodeWithValue} from \"./ILinkedListNode\";\r\nimport {IEnumerateEach} from \"./Enumeration/IEnumerateEach\";\r\nimport {IDisposable} from \"../Disposable/IDisposable\";\r\nimport {ILinkedNodeList} from \"./ILinkedList\";\r\nimport {IEnumerator} from \"./Enumeration/IEnumerator\";\r\nimport {ActionWithIndex, PredicateWithIndex, Selector, SelectorWithIndex} from \"../FunctionTypes\";\r\nimport {ArrayLikeWritable} from \"./Array/ArrayLikeWritable\";\r\nimport __extendsImport from \"../../extends\";\r\n// noinspection JSUnusedLocalSymbols\r\nconst __extends = __extendsImport;\r\n\r\n\r\n/*****************************\r\n * IMPORTANT NOTES ABOUT PERFORMANCE:\r\n * http://jsperf.com/simulating-a-queue\r\n *\r\n * Adding to an array is very fast, but modifying is slow.\r\n * LinkedList wins when modifying contents.\r\n * http://stackoverflow.com/questions/166884/array-versus-linked-list\r\n *****************************/\r\n\r\n/**\r\n * This class is useful for managing a list of linked nodes, but it does not protect against modifying individual links.\r\n * If the consumer modifies a link (sets the previous or next value) it will effectively break the collection.\r\n *\r\n * It is possible to declare a node type of any kind as long as it contains a previous and next value that can reference another node.\r\n * Although not as safe as the included LinkedList, this class has less overhead and is more flexible.\r\n *\r\n * The count (or length) of this LinkedNodeList is not tracked since it could be corrupted at any time.\r\n */\r\nexport class LinkedNodeList<TNode extends ILinkedNode<TNode>>\r\nimplements ILinkedNodeList<TNode>, IEnumerateEach<TNode>, IDisposable\r\n{\r\n\r\n\tprivate _first:TNode|null;\r\n\tprivate _last:TNode|null;\r\n\tunsafeCount:number;\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis._first = null;\r\n\t\tthis._last = null;\r\n\t\tthis.unsafeCount = 0;\r\n\t\tthis._version = 0;\r\n\t}\r\n\r\n\tprivate _version:number;\r\n\r\n\tassertVersion(version:number):true|never\r\n\t{\r\n\t\tif(version!==this._version)\r\n\t\t\tthrow new InvalidOperationException(\"Collection was modified.\");\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * The first node.  Will be null if the collection is empty.\r\n\t */\r\n\tget first():TNode|null\r\n\t{\r\n\t\treturn this._first;\r\n\t}\r\n\r\n\t/**\r\n\t * The last node.\r\n\t */\r\n\tget last():TNode|null\r\n\t{\r\n\t\treturn this._last;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Iteratively counts the number of linked nodes and returns the value.\r\n\t * @returns {number}\r\n\t */\r\n\tget count():number\r\n\t{\r\n\r\n\t\tlet next:TNode|null|undefined = this._first;\r\n\r\n\t\tlet i:number = 0;\r\n\t\twhile(next)\r\n\t\t{\r\n\t\t\ti++;\r\n\t\t\tnext = next.next;\r\n\t\t}\r\n\r\n\t\treturn i;\r\n\t}\r\n\r\n\t// Note, no need for 'useCopy' since this avoids any modification conflict.\r\n\t// If iterating over a arrayCopy is necessary, a arrayCopy should be made manually.\r\n\tforEach(\r\n\t\taction:ActionWithIndex<TNode>, ignoreVersioning?:boolean):number\r\n\tforEach(\r\n\t\taction:PredicateWithIndex<TNode>, ignoreVersioning?:boolean):number\r\n\tforEach(\r\n\t\taction:ActionWithIndex<TNode> | PredicateWithIndex<TNode>, ignoreVersioning?:boolean):number\r\n\t{\r\n\t\tconst _ = this;\r\n\t\tlet current:TNode|null|undefined = null,\r\n\t\t    next:TNode|null|undefined = _.first; // Be sure to track the next node so if current node is removed.\r\n\r\n\t\tconst version = _._version;\r\n\t\tlet index:number = 0;\r\n\t\tdo {\r\n\t\t\tif(!ignoreVersioning) _.assertVersion(version);\r\n\t\t\tcurrent = next;\r\n\t\t\tnext = current && current.next;\r\n\t\t}\r\n\t\twhile(current\r\n\t\t&& <any>action(current, index++)!==false);\r\n\r\n\t\treturn index;\r\n\t}\r\n\r\n\tmap<T>(selector:Selector<TNode,T>):T[]\r\n\tmap<T>(selector:SelectorWithIndex<TNode,T>):T[]\r\n\tmap<T>(selector:SelectorWithIndex<TNode,T>):T[]\r\n\t{\r\n\t\tif(!selector) throw new ArgumentNullException('selector');\r\n\r\n\t\tconst result:T[] = [];\r\n\t\tthis.forEach((node, i)=>\r\n\t\t{\r\n\t\t\tresult.push(selector(node, i));\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\t/**\r\n\t * Erases the linked node's references to each other and returns the number of nodes.\r\n\t * @returns {number}\r\n\t */\r\n\tclear():number\r\n\t{\r\n\t\tconst _ = this;\r\n\t\tlet n:TNode|null|undefined, cF:number = 0, cL:number = 0;\r\n\r\n\t\t// First, clear in the forward direction.\r\n\t\tn = _._first;\r\n\t\t_._first = null;\r\n\r\n\t\twhile(n)\r\n\t\t{\r\n\t\t\tcF++;\r\n\t\t\tlet current = n;\r\n\t\t\tn = n.next;\r\n\t\t\tcurrent.next = null;\r\n\t\t}\r\n\r\n\t\t// Last, clear in the reverse direction.\r\n\t\tn = _._last;\r\n\t\t_._last = null;\r\n\r\n\t\twhile(n)\r\n\t\t{\r\n\t\t\tcL++;\r\n\t\t\tlet current = n;\r\n\t\t\tn = n.previous;\r\n\t\t\tcurrent.previous = null;\r\n\t\t}\r\n\r\n\t\tif(cF!==cL) console.warn('LinkedNodeList: Forward versus reverse count does not match when clearing. Forward: ' + cF + \", Reverse: \" + cL);\r\n\r\n\t\t_._version++;\r\n\t\t_.unsafeCount = 0;\r\n\r\n\t\treturn cF;\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the list.\r\n\t */\r\n\tdispose():void\r\n\t{\r\n\t\tthis.clear();\r\n\t}\r\n\r\n\t/**\r\n\t * Iterates the list to see if a node exists.\r\n\t * @param node\r\n\t * @returns {boolean}\r\n\t */\r\n\tcontains(node:TNode):boolean\r\n\t{\r\n\t\treturn this.indexOf(node)!= -1;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Gets the index of a particular node.\r\n\t * @param index\r\n\t */\r\n\tgetNodeAt(index:number):TNode|null\r\n\t{\r\n\t\tif(index<0)\r\n\t\t\treturn null;\r\n\r\n\t\tlet next = this._first;\r\n\r\n\t\tlet i:number = 0;\r\n\t\twhile(next && i++<index)\r\n\t\t{\r\n\t\t\tnext = next.next || null;\r\n\t\t}\r\n\r\n\t\treturn next;\r\n\r\n\t}\r\n\r\n\tfind(condition:PredicateWithIndex<TNode>):TNode|null\r\n\t{\r\n\t\tlet node:TNode|null = null;\r\n\t\tthis.forEach((n, i)=>\r\n\t\t{\r\n\t\t\tif(condition(n, i))\r\n\t\t\t{\r\n\t\t\t\tnode = n;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn node;\r\n\t}\r\n\r\n\t/**\r\n\t * Iterates the list to find the specified node and returns its index.\r\n\t * @param node\r\n\t * @returns {boolean}\r\n\t */\r\n\tindexOf(node:TNode):number\r\n\t{\r\n\t\tif(node && (node.previous || node.next))\r\n\t\t{\r\n\r\n\t\t\tlet index = 0;\r\n\t\t\tlet c:TNode|null|undefined,\r\n\t\t\t    n:TNode|null|undefined = this._first;\r\n\r\n\t\t\tdo {\r\n\t\t\t\tc = n;\r\n\t\t\t\tif(c===node) return index;\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t\twhile((n = c && c.next));\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes the first node and returns true if successful.\r\n\t * @returns {boolean}\r\n\t */\r\n\tremoveFirst():boolean\r\n\t{\r\n\t\treturn !!this._first && this.removeNode(this._first);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes the last node and returns true if successful.\r\n\t * @returns {boolean}\r\n\t */\r\n\tremoveLast():boolean\r\n\t{\r\n\t\treturn !!this._last && this.removeNode(this._last);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Removes the specified node.\r\n\t * Returns true if successful and false if not found (already removed).\r\n\t * @param node\r\n\t * @returns {boolean}\r\n\t */\r\n\tremoveNode(node:TNode):boolean\r\n\t{\r\n\t\tif(node==null)\r\n\t\t\tthrow new ArgumentNullException('node');\r\n\r\n\t\tconst _ = this;\r\n\t\tconst prev:TNode|null = node.previous || null,\r\n\t\t      next:TNode|null = node.next || null;\r\n\r\n\t\tlet a:boolean = false,\r\n\t\t    b:boolean = false;\r\n\r\n\t\tif(prev) prev.next = next;\r\n\t\telse if(_._first==node) _._first = next;\r\n\t\telse a = true;\r\n\r\n\t\tif(next) next.previous = prev;\r\n\t\telse if(_._last==node) _._last = prev;\r\n\t\telse b = true;\r\n\r\n\t\tif(a!==b)\r\n\t\t{\r\n\t\t\tthrow new ArgumentException(\r\n\t\t\t\t'node', format(\r\n\t\t\t\t\t\"Provided node is has no {0} reference but is not the {1} node!\",\r\n\t\t\t\t\ta ? \"previous\" : \"next\", a ? \"first\" : \"last\"\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst removed = !a && !b;\r\n\t\tif(removed)\r\n\t\t{\r\n\t\t\t_._version++;\r\n\t\t\t_.unsafeCount--;\r\n\t\t\tnode.previous = null;\r\n\t\t\tnode.next = null;\r\n\t\t}\r\n\t\treturn removed;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a node to the end of the list.\r\n\t * @param node\r\n\t * @returns {LinkedNodeList}\r\n\t */\r\n\taddNode(node:TNode):this\r\n\t{\r\n\t\tthis.addNodeAfter(node);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Inserts a node before the specified 'before' node.\r\n\t * If no 'before' node is specified, it inserts it as the first node.\r\n\t * @param node\r\n\t * @param before\r\n\t * @returns {LinkedNodeList}\r\n\t */\r\n\taddNodeBefore(node:TNode, before:TNode|null = null):this\r\n\t{\r\n\t\tassertValidDetached(node);\r\n\r\n\t\tconst _ = this;\r\n\r\n\t\tif(!before)\r\n\t\t{\r\n\t\t\tbefore = _._first;\r\n\t\t}\r\n\r\n\t\tif(before)\r\n\t\t{\r\n\t\t\tlet prev = before.previous;\r\n\t\t\tnode.previous = prev;\r\n\t\t\tnode.next = before;\r\n\r\n\t\t\tbefore.previous = node;\r\n\t\t\tif(prev) prev.next = node;\r\n\t\t\tif(before==_._first) _._first = node;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t_._first = _._last = node;\r\n\t\t}\r\n\r\n\t\t_._version++;\r\n\t\t_.unsafeCount++;\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Inserts a node after the specified 'after' node.\r\n\t * If no 'after' node is specified, it appends it as the last node.\r\n\t * @param node\r\n\t * @param after\r\n\t * @returns {LinkedNodeList}\r\n\t */\r\n\taddNodeAfter(node:TNode, after:TNode|null = null):this\r\n\t{\r\n\t\tassertValidDetached(node);\r\n\t\tconst _ = this;\r\n\r\n\t\tif(!after)\r\n\t\t{\r\n\t\t\tafter = _._last;\r\n\t\t}\r\n\r\n\t\tif(after)\r\n\t\t{\r\n\t\t\tlet next = after.next;\r\n\t\t\tnode.next = next;\r\n\t\t\tnode.previous = after;\r\n\r\n\t\t\tafter.next = node;\r\n\t\t\tif(next) next.previous = node;\r\n\t\t\tif(after==_._last) _._last = node;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t_._first = _._last = node;\r\n\t\t}\r\n\r\n\t\t_._version++;\r\n\t\t_.unsafeCount++;\r\n\r\n\t\treturn _;\r\n\t}\r\n\r\n\t/**\r\n\t * Takes and existing node and replaces it.\r\n\t * @param node\r\n\t * @param replacement\r\n\t * @returns {any}\r\n\t */\r\n\treplace(node:TNode, replacement:TNode):this\r\n\t{\r\n\r\n\t\tif(node==null)\r\n\t\t\tthrow new ArgumentNullException('node');\r\n\r\n\t\tif(node==replacement) return this;\r\n\r\n\t\tassertValidDetached(replacement, 'replacement');\r\n\r\n\t\tconst _ = this;\r\n\t\treplacement.previous = node.previous;\r\n\t\treplacement.next = node.next;\r\n\r\n\t\tif(node.previous) node.previous.next = replacement;\r\n\t\tif(node.next) node.next.previous = replacement;\r\n\r\n\t\tif(node==_._first) _._first = replacement;\r\n\t\tif(node==_._last) _._last = replacement;\r\n\r\n\t\t_._version++;\r\n\r\n\t\treturn _;\r\n\t}\r\n\r\n\tstatic valueEnumeratorFrom<T>(list:LinkedNodeList<ILinkedNodeWithValue<T>>):IEnumerator<T>\r\n\t{\r\n\r\n\t\tif(!list) throw new ArgumentNullException('list');\r\n\r\n\t\tlet current:ILinkedNodeWithValue<T>|null|undefined,\r\n\t\t    next:ILinkedNodeWithValue<T>|null|undefined,\r\n\t\t    version:number;\r\n\r\n\t\treturn new EnumeratorBase<T>(\r\n\t\t\t() =>\r\n\t\t\t{\r\n\t\t\t\t// Initialize anchor...\r\n\t\t\t\tcurrent = null;\r\n\t\t\t\tnext = list.first;\r\n\t\t\t\tversion = list._version;\r\n\t\t\t},\r\n\t\t\t(yielder)=>\r\n\t\t\t{\r\n\t\t\t\tif(next)\r\n\t\t\t\t{\r\n\t\t\t\t\tlist.assertVersion(version);\r\n\r\n\t\t\t\t\tcurrent = next;\r\n\t\t\t\t\tnext = current && current.next;\r\n\t\t\t\t\treturn yielder.yieldReturn(current.value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn yielder.yieldBreak();\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tstatic copyValues<T,TDestination extends ArrayLikeWritable<any>>(\r\n\t\tlist:LinkedNodeList<ILinkedNodeWithValue<T>>,\r\n\t\tarray:TDestination,\r\n\t\tindex:number = 0):TDestination\r\n\t{\r\n\t\tif(list && list.first)\r\n\t\t{\r\n\t\t\tif(!array) throw new ArgumentNullException('array');\r\n\r\n\t\t\tlist.forEach(\r\n\t\t\t\t(node, i) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tarray[index + i] = node.value;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\t}\r\n\r\n}\r\n\r\nfunction assertValidDetached<TNode extends ILinkedNode<TNode>>(\r\n\tnode:TNode,\r\n\tpropName:string = 'node')\r\n{\r\n\r\n\tif(node==null)\r\n\t\tthrow new ArgumentNullException(propName);\r\n\r\n\tif(node.next || node.previous)\r\n\t\tthrow new InvalidOperationException(\"Cannot add a node to a LinkedNodeList that is already linked.\");\r\n\r\n}\r\n\r\nexport default LinkedNodeList;"]}